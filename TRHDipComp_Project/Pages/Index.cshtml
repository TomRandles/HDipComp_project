@page
@model IndexModel
@{
    ViewData["Title"] = "Student Data Management";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<div class="row border border-primary">
    <div class="col-md-2"></div>
    <div class="col-md-8 border_rad text-center align-middle" id="functionsGrad">
        <p style="font-size:30px; color:cornflowerblue">Welcome to the <strong>Student Data Management</strong> site for ITG</p>
    </div>
    <div class="col-md-2"> </div>
</div>

<div id="myCarousel" class="carousel slide" data-ride="carousel" data-interval="6000">
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="item active">
            <img src="~/images/BusinessStudies.png" alt="Business Studies" class="img-responsive center-block" />
            <div>
                <br />
                <br />
                <p class="text-center">
                    Business courses at ITG prepare students for various business related employments to include <br />
                    work in commercial and public sector organisations and accountancy related areas.
                </p>
                <br />

            </div>
        </div>
        <div class="item">
            <img src="~/images/Hairdressing&Beauty.png" alt="Hair Dressing & Beauty" class="img-responsive center-block" />
            <div>
                <br />
                <br />
                <p class="text-center">
                    Learn current trends, techniques and innovations in a creative work and learning environment.
                </p>
            </div>
        </div>
        <div class="item">
            <img src="~/images/Art&Design.png" alt="Art & Design" class="img-responsive center-block" />
            <div>
                <br />
                <br />
                <p class="text-center">
                    ITG Art and Design courses offer a multi-dimensional learning experience which gives you the <br />
                    opportunity to develop your art and design concepts and ideas.
                </p>
            </div>
        </div>
    </div>
    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>
<br />

<div class="container" style="background-color: azure">

    <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-3 border_rad text-center align-middle" id="functionsGrad">
            <a asp-page="RegisterStudent"><strong>Register student</strong></a>
        </div>
        <div class="col-md-2"></div>
        <div class="col-md-3 border_rad text-center align-middle" id="functionsGrad">
            <a asp-page="CreateProgramme"><strong>Create programme</strong></a>
        </div>
        <div class="col-md-2"> </div>
    </div>

    <div class="row border border-primary">
        <div class="col-md-2"></div>
        <div class="col-md-3 border_rad text-center align-middle" id="functionsGrad">
            <a asp-page="ListStudents"><strong>List students</strong></a>
        </div>
        <div class="col-md-2"></div>
        <div class="col-md-3 border_rad text-center align-middle" id="functionsGrad">
            <a asp-page="CreateModule"><strong>Create module</strong></a>
        </div>
        <div class="col-md-2"> </div>
    </div>
    <div class="row border border-primary">
        <div class="col-md-2"></div>
        <div class="col-md-3 border_rad text-center align-middle" id="functionsGrad">
            <a asp-page="SearchStudentDetails"><strong>Search student details</strong></a>
        </div>
        <div class="col-md-2"></div>
        <div class="col-md-3 border_rad text-center align-middle" id="functionsGrad">
            <a asp-page="CreateAssessment"><strong>Create assessment</strong></a>
        </div>
        <div class="col-md-2"> </div>
    </div>
    <div class="row border border-primary">
        <div class="col-md-2"></div>
        <div class="col-md-3 border_rad text-center align-middle" id="functionsGrad">
            <a asp-page="ListProgrammes"><strong>List programmes</strong></a>
        </div>
        <div class="col-md-2"></div>
        <div class="col-md-3 border_rad text-center align-middle" id="functionsGrad">
            <a asp-page="ListProgrammes"><strong>List programmes</strong></a>
        </div>
        <div class="col-md-2"> </div>
    </div>
    <div class="row border border-primary">
        <div class="col-md-2"></div>
        <div class="col-md-3 border_rad text-center align-middle" id="functionsGrad">
            <a asp-page="SendStudentMessage"><strong>Send student message</strong></a>
        </div>
        <div class="col-md-2"></div>
        <div class="col-md-3 border_rad text-center align-middle" id="functionsGrad">
            <a asp-page="ListAssessmentResults"><strong>List assessment results</strong></a>
        </div>
        <div class="col-md-2"> </div>
    </div>
    <div class="row border border-primary">
        <div class="col-md-2"></div>
        <div class="col-md-8 border_rad text-center align-middle" id="functionsGrad">
            <a asp-page="ListModules"><strong>List programmes, modules & assessments</strong></a>
        </div>
        <div class="col-md-2"> </div>
    </div>
</div>

<div class="container" style="background-color:beige; margin:auto; padding:20px;">
    <div class="row">
        <div class="col-md-1"></div>
        <div class="col-md-4">
            <br />
            <h3>Today's weather </h3>
            <p>@DateTime.Now.ToShortDateString()  @DateTime.Now.ToShortTimeString()</p>
            <br />
            <p id="GetWeather"></p>
            <br />
        </div>
        <div class="col-md-3"></div>
        <div style="height:300px; width:500px" class="col-md-4" id="map-canvas"></div>
    </div>
</div>

<script type="text/javascript" src="~/js/OpenWeatherMapGoogleMap.js">
</script>

<script>
    function GetLocalWeather(cityID) {
 
        var gettingData = true;
        var APIKey = "@Model.OpenWeatherMapAPIKey";
        var requestString = "https://api.openweathermap.org/data/2.5/weather?id=" + cityID
            + "&cluster=yes&format=json"
            + "&APPID=" + APIKey
            + "&units=metric";

        var request = new XMLHttpRequest();
        request.onload = proccessWResults;
        request.open("get", requestString, true);
        request.send();
        return "GetLocalWeatherReturn";
    };

    var proccessWResults = function () {

        var results = JSON.parse(this.responseText);
        document.getElementById("GetWeather").innerHTML = results.name + "\'s weather today: " + results.weather[0].description + ", temperature: " + results.main.temp + " °C, humidity: " + results.main.humidity + " %, windspeed: " + results.wind.speed + " Km/h.";
    };

</script>

<script>
       
    document.getElementById("GetWeather").innerHTML = window.GetLocalWeather(@Model.OpenWeatherMapsCityID);
    var string = "";
    window.loadMap();

    function loadMap() {
        var key = "@Model.GoogleMapsAPIKey";
        var script = document.createElement('script');
        script.type = 'text/javascript';
        string = '{\"latitude\":' + @Model.GoogleMapsLatitudeCoordinate + ',\"longitude\":' + @Model.GoogleMapsLongitudeCoordinate + '}';
        script.src = "https://maps.googleapis.com/maps/api/js?key=" + key + "&callback=initMap";
        document.body.appendChild(script);
    }

</script>
